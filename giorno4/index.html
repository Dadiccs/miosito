<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>DF_WORKSTATION_FINAL_V11</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.js"></script>

  <style>
    @font-face {
      font-family: 'Suisse Mono';
      src: local('Suisse Intl Mono Trial Regular'), local('Menlo'), monospace;
    }

    :root {
      --accent-color: #00ff64;
      --bg-dark: #020202;
      --window-border: #222;
      --text-dim: #555;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; text-transform: uppercase; }

    body {
      background-color: #000;
      color: var(--accent-color);
      font-family: 'Suisse Mono', 'Menlo', monospace;
      height: 100vh;
      overflow: hidden;
      display: flex; align-items: center; justify-content: center;
    }

    /* STILI IMPORTATI PER IL TASTO EXIT_SESSION */
    .ui-btn {
      background: transparent;
      color: var(--accent-color);
      border: 1px solid rgba(255,255,255,0.1);
      padding: 12px 15px;
      cursor: pointer;
      font-family: 'Courier New', Courier, monospace; /* Mantenuto font originale come richiesto */
      font-size: 11px;
      text-align: left;
      transition: all 0.2s;
      text-transform: uppercase;
      text-decoration: none;
      display: block;
    }
    .ui-btn:hover { background: rgba(255,255,255,0.05); border-color: var(--accent-color); }
    
    .home-section {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding-top: 20px;
      margin-top: 10px;
    }
    .home-btn {
      text-align: center;
      border-style: dashed;
      opacity: 0.7;
    }
    .home-btn:hover { opacity: 1; border-style: solid; }
    /* ----------------------------------------- */

    #main-container {
      width: 95vw; height: 90vh;
      display: grid;
      grid-template-columns: 300px 1fr;
      grid-template-rows: auto 1fr auto;
      border: 1px solid var(--window-border);
      background: var(--bg-dark);
      position: relative;
    }

    #main-container::before {
      content: ""; position: absolute; inset: 0;
      background-image: radial-gradient(circle, #111 1px, transparent 1px);
      background-size: 30px 30px; opacity: 0.3; pointer-events: none;
    }

    .header {
      grid-column: span 2;
      padding: 15px 25px;
      border-bottom: 1px solid var(--window-border);
      display: flex; justify-content: space-between; align-items: center;
      background: #0a0a0a; z-index: 2;
    }

    .sidebar {
      border-right: 1px solid var(--window-border);
      padding: 30px 20px;
      display: flex; flex-direction: column; gap: 35px;
      background: #050505; z-index: 2;
    }

    #content-area { 
      position: relative; 
      display: flex; align-items: center; justify-content: center;
      padding: 40px; z-index: 2;
    }

    .identity-card {
      width: 100%; max-width: 650px;
      border: 1px solid var(--accent-color);
      padding: 45px; position: relative;
      background: rgba(0,0,0,0.9);
      box-shadow: 0 0 30px rgba(0, 255, 100, 0.05);
    }

    .identity-card::before {
      content: "OFFICIAL_DIAGNOSTIC_DATA";
      position: absolute; top: -10px; left: 20px;
      background: #000; padding: 0 10px; font-size: 10px; color: #fff;
    }

    .hero-data { margin-bottom: 45px; }
    .hero-label { font-size: 10px; color: var(--text-dim); margin-bottom: 8px; display: block; }
    .hero-value { font-size: 26px; color: #fff; font-weight: bold; border-bottom: 2px solid var(--accent-color); display: inline-block; padding-bottom: 5px; }

    .footer {
      grid-column: span 2;
      padding: 12px 25px;
      border-top: 1px solid var(--window-border);
      display: flex; justify-content: space-between; font-size: 10px;
      opacity: 0.6; z-index: 2;
    }

    .section-title { font-size: 10px; color: #fff; margin-bottom: 12px; letter-spacing: 2px; }
    .data-row { display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 10px; border-bottom: 1px solid #111; padding-bottom: 5px; }
    .data-label { opacity: 0.5; }
    .data-value { color: var(--accent-color); font-weight: bold; }
  </style>
</head>
<body>

  <div id="main-container">
    <div class="header">
      <div style="font-size: 12px; letter-spacing: 2px;">STATION_CORE // <span style="color:#fff">V11.0_PRO_MONITOR</span></div>
      <div id="clock">00:00:00</div>
    </div>

    <aside class="sidebar">
      <div>
        <h2 class="section-title">01_SESSION_LOG</h2>
        <div class="data-row"><span class="data-label">UPTIME:</span> <span class="data-value" id="uptime-v">00:00:00</span></div>
        <div class="data-row"><span class="data-label">FRAME_RATE:</span> <span class="data-value" id="fps-v">--</span></div>
      </div>

      <div>
        <h2 class="section-title">02_CONNECTIVITY</h2>
        <div class="data-row"><span class="data-label">RTT_LATENCY:</span> <span class="data-value" id="ping-v">--</span></div>
        <div class="data-row"><span class="data-label">DOWNLINK:</span> <span class="data-value" id="speed-v">--</span></div>
      </div>

      <div class="section home-section">
        <a href="https://dadiccs.github.io/miosito/" class="ui-btn home-btn">[X] EXIT_SESSION</a>
      </div>

      <div style="margin-top: auto; font-size: 9px; opacity: 0.4; border-top: 1px solid #222; padding-top: 15px;">
        > KERNEL_ID: 0x88FF<br>
        > STATUS: ACTIVE_DIAG<br>
        > PROTOCOL: HTTPS_EMULATED
      </div>
    </aside>

    <main id="content-area">
      <div class="identity-card">
        <div class="hero-data">
          <span class="hero-label">HARDWARE_GRAPHICS_RENDERER</span>
          <span class="hero-value" id="gpu-hero">DETECTING...</span>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
          <div>
            <span class="hero-label">HOST_OS</span><br>
            <span class="data-value" id="os-hero" style="font-size: 18px;">--</span>
          </div>
          <div>
            <span class="hero-label">LOGICAL_CORES</span><br>
            <span class="data-value" id="cpu-hero" style="font-size: 18px;">--</span>
          </div>
          <div>
            <span class="hero-label">LOCAL_TZ_OFFSET</span><br>
            <span class="data-value" id="tz-hero" style="font-size: 18px;">--</span>
          </div>
          <div>
            <span class="hero-label">SYS_LANGUAGE</span><br>
            <span class="data-value" id="lang-hero" style="font-size: 18px;">--</span>
          </div>
        </div>
      </div>
    </main>

    <div class="footer">
      <span>REF_AUTH: DF_STATION</span>
      <span>WINDOW_RES: <span id="res-v">--</span></span>
    </div>
  </div>

  <script>
    const startTime = Date.now();

    function initData() {
      const gl = document.createElement('canvas').getContext('webgl');
      const ext = gl.getExtension('WEBGL_debug_renderer_info');
      const gpu = ext ? gl.getParameter(ext.UNMASKED_RENDERER_WEBGL) : "WEBKIT_GENERIC_GPU";
      document.getElementById('gpu-hero').innerText = gpu.split('/').pop().replace('Direct3D11 vs_5_0 ps_5_0', '').trim();

      document.getElementById('os-hero').innerText = navigator.platform.includes('Mac') ? 'MACOS_DARWIN' : 'WINDOWS_NT';
      document.getElementById('cpu-hero').innerText = (navigator.hardwareConcurrency || 8) + " UNITS";
      
      const tzName = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const offsetMinutes = new Date().getTimezoneOffset();
      const offsetHours = -offsetMinutes / 60;
      const gmtString = `GMT${offsetHours >= 0 ? '+' : ''}${offsetHours}`;
      document.getElementById('tz-hero').innerText = `${tzName.split('/').pop()} (${gmtString})`;

      document.getElementById('lang-hero').innerText = navigator.language.toUpperCase();
      
      const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      if (conn && conn.rtt) {
        document.getElementById('ping-v').innerText = conn.rtt + " MS";
        document.getElementById('speed-v').innerText = conn.downlink + " MBPS";
      } else {
        document.getElementById('ping-v').innerText = "24 MS (SIM)";
        document.getElementById('speed-v').innerText = "120.0 MBPS (SIM)";
      }
    }

    function updateUptime() {
      const elapsed = Date.now() - startTime;
      const h = Math.floor(elapsed / 3600000).toString().padStart(2, '0');
      const m = Math.floor((elapsed % 3600000) / 60000).toString().padStart(2, '0');
      const s = Math.floor((elapsed % 60000) / 1000).toString().padStart(2, '0');
      document.getElementById('uptime-v').innerText = `${h}:${m}:${s}`;
    }

    function setup() {
      const area = document.getElementById('content-area');
      let canvas = createCanvas(area.offsetWidth, area.offsetHeight);
      canvas.parent('content-area');
      canvas.style('position', 'absolute');
      canvas.style('z-index', '1');
      canvas.style('pointer-events', 'none');
      initData();
    }

    function draw() {
      clear();
      document.getElementById('fps-v').innerText = frameRate().toFixed(0);
      document.getElementById('res-v').innerText = `${windowWidth}X${windowHeight}`;
      
      stroke(0, 255, 100, 25);
      let scanY = (frameCount * 1.2) % height;
      line(0, scanY, width, scanY);

      stroke(0, 255, 100, 60);
      noFill();
      let pad = 10;
      line(pad, pad, pad+15, pad); line(pad, pad, pad, pad+15);
      line(width-pad, height-pad, width-pad-15, height-pad); line(width-pad, height-pad, width-pad, height-pad-15);
    }

    setInterval(() => {
      document.getElementById('clock').innerText = new Date().toLocaleTimeString();
      updateUptime();
    }, 1000);

    function windowResized() {
      const area = document.getElementById('content-area');
      resizeCanvas(area.offsetWidth, area.offsetHeight);
    }
  </script>
</body>
</html>